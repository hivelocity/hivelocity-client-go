## Hivelocity Go Client

[![GoDoc](https://godoc.org/github.com/hivelocity/hivelocity-client-go/client?status.svg)](https://godoc.org/github.com/hivelocity/hivelocity-client-go/client)
[![Build Status](https://travis-ci.com/hivelocity/hivelocity-client-go.svg?branch=master)](https://travis-ci.com/hivelocity/hivelocity-client-go)

This project `github.com/hivelocity/hivelocity-client-go/client` is an autogenerated OpenAPI v3 client from our [Hosted API Specification](https://core.hivelocity.net/api/v2/swagger.json).

Hivelocity API Docs: [developers.hivelocity.net/docs](https://developers.hivelocity.net/docs)

## Getting Started

If you're just looking to use this client in your project, simply run `go get -u github.com/hivelocity/hivelocity-client-go/client`. Then checkout the [GoDoc](https://godoc.org/github.com/hivelocity/hivelocity-client-go/client).

## Example Code

Here is an example how to [list all available service types](https://developers.hivelocity.net/reference/get_service_type_resource).


```Go
package main

import (
	"context"
	"fmt"
	"log"
	"os"

	hv "github.com/hivelocity/hivelocity-client-go/client"
)

func main() {
	apiKey := os.Getenv("HIVELOCITY_API_KEY")
	if apiKey == "" {
		log.Fatalln("Missing environment variable HIVELOCITY_API_KEY")
		os.Exit(1)
	}
	authContext := context.WithValue(context.Background(), hv.ContextAPIKey, hv.APIKey{
		Key: apiKey,
	})
	apiClient := hv.NewAPIClient(hv.NewConfiguration())
	serviceTypes, _, err := apiClient.ServiceApi.GetServiceTypeResource(authContext, nil)
	if err != nil {
		log.Fatalln(err)
		os.Exit(1)
	}
	for _, st := range serviceTypes {
		fmt.Printf("service type: %+v\n", st)
	}
}
```


## Internal Development

The code in the directory "client" was auto-generated by swagger. Do not change this code, since
changes will be overwritten the next time `make client` gets called.

### Generating a fresh client with latest API changes

To generate a client, first you need `java`, `make`, and `wget` install. These should be available in your package manager:

```shell
# Debian/Ubuntu Linux or WSL
$ sudo apt-get install -y make wget java

# Homebrew (OSX)
$ brew install make wget
$ brew cask install java
```

After all the dependencies are installed, run the following make command to update the client code from the latest [Swagger Specification](https://core.hivelocity.net/api/v2/swagger.json):

```shell
$ make client
```

### Releasing

Get the current changes:

```shell
git switch main
git pull
```

Have a look at the current (old) version: [Github Releases / Tags](https://github.com/hivelocity/hivelocity-client-go/tags)

```shell
export RELEASE_TAG=<the tag of the release to be cut> (eg. export RELEASE_TAG=v0.1.0)
git tag -a ${RELEASE_TAG} -m ${RELEASE_TAG}
```

Push the tag to the GitHub repository.

NOTE: origin should be the name of the remote pointing to github.com/hivelocity/hivelocity-client-go

```shell
git push origin ${RELEASE_TAG}
```

